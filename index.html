<!DOCTYPE html>
<html lang="cs">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Směs do porcí</title>
  <link rel="manifest" href="./manifest.json">
  <style>
    :root{
      --bg:#0b1020; --card:#121833; --text:#e6edf3; --muted:#9fb2c8;
      --accent:#5fb3f7; --border:#24304d; --input-bg:#0f152b; --btn:#3b445f;
    }
    html,body{background:var(--bg); color:var(--text); font-family: system-ui,-apple-system,Segoe UI,Roboto,Ubuntu,Cantarell,"Noto Sans",Arial;}
    *{box-sizing:border-box}
    .container{max-width:900px; margin:32px auto; padding:0 16px}
    h1{font-size:36px; margin:0 0 16px}
    .card{background:var(--card); border:1px solid var(--border); border-radius:14px; padding:18px; margin:18px 0}
    label{display:block; margin-bottom:8px; color:var(--muted)}
    input[type="number"]{width:100%; padding:12px 14px; border-radius:10px; border:1px solid var(--border); background:var(--input-bg); color:var(--text); font-size:16px}
    input[readonly]{opacity:0.95}
    .btn{background:var(--btn); color:var(--text); border:none; padding:10px 16px; border-radius:10px; cursor:pointer}
    .btn:hover{filter:brightness(1.1)}
    table{width:100%; border-collapse:collapse}
    th,td{border:1px solid var(--border); padding:10px}
    th{color:var(--accent); font-weight:600; background:rgba(255,255,255,0.02)}
    .grid{display:grid; grid-template-columns:1fr auto; gap:12px}
    .pill{border-radius:10px}
  </style>
</head>
<body>
  <div class="container">
    <h1>Směs do porcí</h1>

    <div class="card">
      <h2>Vstupy</h2>
      <label for="F1">Směs</label>
      <div class="grid">
        <input id="F1" type="number" step="0.01" class="pill" placeholder="např. 300" />
        <button id="reset" class="btn">Reset</button>
      </div>
    </div>

    <div class="card">
      <h2>Porce a podíly</h2>
      <table>
        <thead>
          <tr>
            <th>Osoba</th>
            <th>Porce</th>
            <th>Podíly</th>
          </tr>
        </thead>
        <tbody>
          <tr>
            <td><strong>Kája</strong></td>
            <td><input id="F3" type="number" readonly class="pill"/></td>
            <td><input id="F4" type="number" step="0.01" class="pill" placeholder="100"/></td>
          </tr>
          <tr>
            <td><strong>Máša</strong></td>
            <td><input id="G3" type="number" readonly class="pill"/></td>
            <td><input id="G4" type="number" step="0.01" class="pill" placeholder="80"/></td>
          </tr>
          <tr>
            <td><strong>Fanda</strong></td>
            <td><input id="H3" type="number" readonly class="pill"/></td>
            <td><input id="H4" type="number" step="0.01" class="pill" placeholder="45"/></td>
          </tr>
          <tr>
            <td><strong>Tóňa</strong></td>
            <td><input id="I3" type="number" readonly class="pill"/></td>
            <td><input id="I4" type="number" step="0.01" class="pill" placeholder="35"/></td>
          </tr>
        </tbody>
      </table>
    </div>
  </div>

  <script>
    function n(id){ return Number(document.getElementById(id).value || 0); }
    function setVal(id, v){ document.getElementById(id).value = Number.isFinite(v) ? Number(v.toFixed(2)) : 0; }

    function compute(){
      const F1 = n('F1');
      const F4 = n('F4');
      const G4 = n('G4');
      const H4 = n('H4');
      const I4 = n('I4');

      const sumShares = F4 + G4 + H4 + I4;
      const base = sumShares > 0 ? F1 / sumShares : 0;

      setVal('F3', base * F4); // Kája
      setVal('G3', base * G4); // Máša
      setVal('H3', base * H4); // Fanda
      setVal('I3', base * I4); // Tóňa
    }

    ['F1','F4','G4','H4','I4'].forEach(id => {
      document.getElementById(id).addEventListener('input', compute);
    });
    document.getElementById('reset').addEventListener('click', () => {
      ['F1','F4','G4','H4','I4'].forEach(id => document.getElementById(id).value = '');
      ['F3','G3','H3','I3'].forEach(id => document.getElementById(id).value = 0);
    });

    // První výpočet po načtení, pokud jsou placeholdery vyplněny uživatelem
    compute();
  </script>

  <script>
    if ('serviceWorker' in navigator) {
      window.addEventListener('load', () => {
        navigator.serviceWorker.register('./sw.js').catch(console.error);
      });
    }
  </script>
</body>
</html>